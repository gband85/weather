<html>
<head>
  <link href="bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="bootstrap.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-4 col-md-offset-4">
        <button id="fahrenheit" class="btn pull-right active">&#x2109</button>
        <button id="celsius" class="btn pull-right">&#x2103</button>
      </div>
      <div id="weather" class="col-md-4 col-md-offset-4">
<h1 id="location" class="text-center"></h1>
<h1 id="temp" class="text-center"></h1>
<h1 id="description" class="text-center"></h1>


        </div>
      </div>
    </div>
    <script>

    function locate_success(pos) {
      var crd = pos.coords;
      console.log(crd);
      getWeather(pos.coords.latitude, pos.coords.longitude);
    };
    navigator.geolocation.getCurrentPosition(locate_success);


    function getWeather(lat, long) {
var weatherAPI = "http://api.openweathermap.org/data/2.5/weather?";
      $.getJSON(weatherAPI, {
        lat: lat,
        lon: long,
        appid: "6e9d30aa04efb35a98660cb48055e099"
      },
      function(data) {
        weather = data;
      })
      .done(function() {
        var tempf=Math.floor(9/5*(weather.main.temp - 273.15)+32);
        var tempc=Math.floor(weather.main.temp - 273.15);
$("#location").html(weather["name"]);
        $("#temp").html(tempf + '<sup>&#x2109</sup>');
        //$(".weather").append("<sup>&#x2109</sup>");
        $("#description").html(weather["weather"][0]["description"]);
        $("#celsius").on("click", function() {
          $("#celsius").addClass("active");
          $("#fahrenheit").removeClass("active");
          $("#temp").html(tempc + '<sup>&#x2103</sup>');
          //$(".weather").html(tempc);
          //$(".weather").append("<sup>&#x2103</sup>");
          //$("#weather").html("<h2>" + weather["weather"][0]["description"] + "</h2>");
        });
        $("#fahrenheit").on("click", function() {
          $("#celsius").removeClass("active");
          $("#fahrenheit").addClass("active");
          $("#temp").html(tempf + '<sup>&#x2109</sup>');
          //$(".weather").html(tempf);
          //$(".weather").append("<sup>&#x2109</sup>");
          //$("#weather").html("<h2>" + weather["weather"][0]["description"] + "</h2>");
        });
        switch (weather["weather"][0]["id"]) {
          case 800: //"clear sky":
          $("#description").append("<img src='icons/32.png' class='center-block'>");
          break;
          case 803: //"broken clouds":
          $("#description").append("<img src='icons/26.png' class='center-block'>");
          break;
          case 801: //"few clouds":
          $("#description").append("<img src='icons/30.png' class='center-block'>");
          break;
          case 802: //"scattered clouds":
          $("#description").append("<img src='icons/26.png' class='center-block'>");
          break;
          case "rain":
          $("#description").append("<img src='http://openweathermap.org/img/w/10d.png' class='center-block'>");
          break;
          case 521: //"shower rain":
          $("#description").append("<img src='icons/11.png' class='center-block'>");
          break;
          case 211: //"thunderstorm":
          $("#description").append("<img src='icons/03.png' class='center-block'>");
          break;
          case 601: //"snow":
          $("#description").append("<img src='icons/14.png' class='center-block'>");
          break;
        }

      })
      .fail(function( jqxhr, textStatus, error ) {
        var err = textStatus + ", " + error;
        console.log( "Request Failed: " + err );
      });
    }


    $(document).ready(function() {

      //getWeather(crd);

    });

    </script>
  </body>
  </html>
